Чтобы достать статус-код в POST-запросе с использованием функции `http.request`, вот пример кода, который делает это:

```lua
local http = require("socket.http")  -- или твой модуль pkg/http
local ltn12 = require("ltn12")

-- Данные для POST-запроса
local request_body = "param1=value1&param2=value2"
local response_body = {}

-- Выполнение POST-запроса
local result, status_code, headers = http.request{
    url = "http://example.com",
    method = "POST",
    source = ltn12.source.string(request_body),
    headers = {
        ["content-length"] = tostring(#request_body),
        ["content-type"] = "application/x-www-form-urlencoded"
    },
    sink = ltn12.sink.table(response_body)
}

-- Вывод статус-кода
print("Status code: ", status_code)

-- Вывод ответа
print("Response body: ", table.concat(response_body))
```

В этом примере:
- `http.request` возвращает три значения:
  - `result` — результат запроса (обычно `true` или `nil` в случае ошибки),
  - `status_code` — статус-код HTTP-ответа,
  - `headers` — таблица с заголовками ответа.
- `sink = ltn12.sink.table(response_body)` собирает тело ответа в таблицу `response_body`.

Таким образом, статус-код можно вывести через переменную `status_code`.