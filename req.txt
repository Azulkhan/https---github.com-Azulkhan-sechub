
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DataSet menuData = YourClassName.GetMenuItems(); // Замените YourClassName на ваш класс

        Dictionary<string, MenuItem> menuItems = new Dictionary<string, MenuItem>();

        foreach (DataRow row in menuData.Tables[0].Rows)
        {
            MenuItem menuItem = new MenuItem();
            menuItem.Text = row["MenuItemText"].ToString();
            menuItem.NavigateUrl = "javascript:void(0)"; // Если NavigateUrl не требуется

            string id = row["ID"].ToString(); // Замените "ID" на имя столбца с идентификаторами
            menuItems.Add(id, menuItem);

            // Добавляем пункт меню в корень, если у него нет родительского элемента
            if (string.IsNullOrEmpty(row["ParentID"].ToString()))
            {
                ASPxMenu1.Items.Add(menuItem);
            }
            else
            {
                // Ищем родительский элемент по ParentID и добавляем текущий элемент к нему
                MenuItem parentItem = menuItems[row["ParentID"].ToString()];
                if (parentItem != null)
                {
                    parentItem.Items.Add(menuItem);
                }
            }
        }
    }
}
