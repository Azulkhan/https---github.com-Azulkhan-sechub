
Для проверки наличия доступа к внешним ссылкам и интернету из Lua скрипта, вы можете использовать библиотеку `LuaSocket` для выполнения простого HTTP GET запроса к известному веб-ресурсу, например, к `http://google.com`. Это даст вам понимание, может ли ваш сервер устанавливать исходящие соединения с веб-сайтами. Вот пример такого проверочного скрипта:

```lua
local http = require("socket.http")
local ltn12 = require("ltn12")

-- Устанавливаем короткий тайм-аут, чтобы не ждать слишком долго
http.TIMEOUT = 5

local response_body = {}
-- Выполняем HTTP GET запрос к google.com
local res, code, response_headers, status = http.request{
    url = "http://www.google.com",
    sink = ltn12.sink.table(response_body),
}

-- Проверяем, успешно ли выполнен запрос
if code == 200 then
    print("Доступ к интернету есть.")
else
    print("Доступ к интернету отсутствует или ограничен. Код ответа: ", code)
end
```

Важно помнить несколько моментов:

1. **Выбор URL**: Хотя использование `google.com` является общепринятым способом проверки доступа в Интернет, в некоторых средах доступ к Google может быть ограничен по политическим или иным причинам. В таком случае вы можете использовать другой надёжный ресурс, к которому, как известно, должен быть доступ.

2. **Безопасность**: Регулярное выполнение подобных проверок может быть воспринято как нежелательный сетевой трафик некоторыми службами. Всегда учитывайте политику использования целевого веб-сервиса.

3. **LuaSocket**: Для работы примера вам необходимо убедиться, что у вас установлена библиотека `LuaSocket`. Эту библиотеку можно установить через LuaRocks или другой менеджер пакетов Lua.

Этот метод проверяет возможность установления HTTP соединения, что является хорошим индикатором наличия доступа к Интернету. Однако, если вам нужно проверить доступность определённых портов или протоколов (например, SMTP для электронной почты или FTP для передачи файлов), вам потребуются более специализированные тесты.
