Чтобы сравнить даты в Lua и выполнить определенное действие, если одна дата раньше другой, можно воспользоваться библиотекой `os`. Вот пример кода, который выполняет это:

```lua
-- Функция для преобразования строки даты в таблицу времени
function parse_date(date_str)
    local pattern = "(%d+)-(%d+)-(%d+) (%d+):(%d+):(%d+)"
    local year, month, day, hour, min, sec = date_str:match(pattern)
    return os.time({
        year = year,
        month = month,
        day = day,
        hour = hour,
        min = min,
        sec = sec
    })
end

-- Даты для сравнения
local date1_str = "2024-07-03 17:30:31"
local date2_str = "2024-07-03 17:20:31"

-- Преобразование строк дат в таблицы времени
local date1 = parse_date(date1_str)
local date2 = parse_date(date2_str)

-- Сравнение дат
if date1 > date2 then
    print("Первая дата позже второй.")
else
    print("Первая дата не позже второй.")
end
```

Этот скрипт преобразует строки дат в таблицы времени и затем сравнивает их. Если первая дата позже второй, он выведет соответствующее сообщение. Если первая дата раньше или равна второй, он выведет другое сообщение.

Проверьте и используйте этот код в вашем проекте для сравнения дат.